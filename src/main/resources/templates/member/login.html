<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default_layout}">

<div layout:fragment="content">
    
    <div style="display: flex; justify-content: center; align-items: center; min-height: 60vh;">
        
        <div class="glass-panel" style="width: 400px; padding: 40px;">
            
            <h2 style="text-align: center; color: var(--primary-color); margin-bottom: 30px; font-weight: bold;">
                ログイン
            </h2>

            <div th:if="${param.error}" style="background: #ffe6e6; color: #d63031; padding: 10px; border-radius: 5px; margin-bottom: 20px; font-size: 14px; text-align: center;">
                <span style="font-weight: bold;">⚠ エラー</span><br>
                IDまたはパスワードが正しくありません。
            </div>

            <div th:if="${param.logout}" style="background: #e6fffa; color: #00b894; padding: 10px; border-radius: 5px; margin-bottom: 20px; font-size: 14px; text-align: center;">
                <span style="font-weight: bold;">✓ 成功</span><br>
                ログアウトしました。
            </div>
            
            <form action="/login" method="post">
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: 500;">
                        ログインID
                    </label>
                    <input type="text" name="userid" required placeholder="IDを入力してください" autofocus
                           style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box;">
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: 500;">
                        パスワード
                    </label>
                    <input type="password" name="password" required placeholder="パスワードを入力してください"
                           style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box;">
                </div>

                <div style="margin-bottom: 20px; display: flex; align-items: center;">
                    <input type="checkbox" id="remember" name="remember-me" style="margin-right: 5px;">
                    <label for="remember" style="font-size: 14px; color: #666; cursor: pointer;">
                        ログイン状態を保持する
                    </label>
                </div>
                
                <button type="submit" class="btn-primary" style="width: 100%; font-size: 16px; font-weight: bold;">
                    ログイン (Login)
                </button>
            </form>
            
            <div style="text-align: center; margin-top: 25px; font-size: 13px; color: #666;">
                まだアカウントをお持ちでない方<br>
                <a href="/register" style="color: var(--primary-color); font-weight: bold; text-decoration: underline;">
                    新規会員登録はこちら
                </a>
            </div>

            <div style="text-align: center; margin-top: 10px; font-size: 12px;">
                <a href="#" style="color: #999; text-decoration: none;">パスワードをお忘れの方</a>
            </div>

        </div>
    </div>

	<script th:inline="javascript">
        /*<![CDATA[*/
        document.addEventListener('DOMContentLoaded', function () {
            
            // Controllerから伝達されたメッセージを取得 (RedirectAttributes)
            const msg = [[${msg}]];     // 内容 (Content)
            const title = [[${title}]]; // タイトル (Title)
            
            // メッセージが存在する場合のみ、SweetAlertを表示
            if (msg) {
                Swal.fire({
                    icon: 'success',           		// アイコン (success, error, warning, info)
                    title: title || '通知',    		// タイトル (Default: Notification)
                    text: msg,                 		// メッセージ内容
                    confirmButtonColor: '#FF6B00', 	// JSL Orange Color
                    confirmButtonText: '確認'   		// ボタンテキスト
                });
            }
        });
        /*]]>*/
    </script>

	</div>
</html>