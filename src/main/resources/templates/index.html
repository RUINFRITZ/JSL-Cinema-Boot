<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default_layout}">

<div layout:fragment="content">
    
    <div class="glass-panel" style="padding: 42px 50px; text-align: center; margin-bottom: 15px;">
        
        <p style="font-size: 0.9rem; color: var(--primary-color); font-weight: 700; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 10px;">
            JSL CINEMA <span style ="color : gray">REMASTER</span>
        </p>

        <h1 style="font-size: 3.5rem; margin: 0 0 20px 0; line-height: 1.2; font-weight: 800; letter-spacing: -0.05em;">
            映画体験を、<span style="color: var(--primary-color);">再定義</span>する。
        </h1>
        
        <p style="color: #555; font-size: 1.1rem; margin-bottom: 40px; line-height: 1.8;">
        	あなただけの特等席で、最高の物語に出会う旅へ。<br>
            圧倒的な没入感と、スマートな予約システム。
        </p>
        
        <a href="/movie/list" class="btn-primary" style="font-size: 1.1rem; padding: 15px 50px; border-radius: 50px; box-shadow: 0 4px 15px rgba(255, 107, 0, 0.3);">
            映画を予約する
        </a>
    </div>

	<div class="movie-scroll-container" id="movieScroll">
	        
	        <div class="movie-card-xl">Movie Poster 1</div>
	        <div class="movie-card-xl">Movie Poster 2</div>
	        <div class="movie-card-xl">Movie Poster 3</div>
	        <div class="movie-card-xl">Movie Poster 4</div>
	        <div class="movie-card-xl">Movie Poster 5</div>
	        <div class="movie-card-xl">Movie Poster 6</div>
	        <div class="movie-card-xl">Movie Poster 7</div>
	        <div class="movie-card-xl">Movie Poster 8</div>

	</div>

	<script>
        document.addEventListener('DOMContentLoaded', function () {
            
			// -------------------------------------------------------
            // 1. ログイン成功トースト通知 (Login Success Toast)
            // -------------------------------------------------------
			
            // 01. URLパラメータから 'welcome' を探す
            const urlParams = new URLSearchParams(window.location.search);
            const isWelcome = urlParams.get('welcome');

            if (isWelcome) {
                // 02. SweetAlert2 Toast Mixin 設定 (トースト設定)
                const Toast = Swal.mixin({
                    toast: true,               // トーストモード有効
                    position: 'top-end',       // 右上に表示
                    showConfirmButton: false,  // 確認ボタンなし
                    timer: 3000,               // 3秒後に自動で消える
                    timerProgressBar: true,    // 時間経過バーを表示
                    didOpen: (toast) => {
                        toast.addEventListener('mouseenter', Swal.stopTimer)
                        toast.addEventListener('mouseleave', Swal.resumeTimer)
                    }
                });

                // 03. トースト発火 (Fire!)
                Toast.fire({
                    icon: 'success',
                    title: 'ようこそ！ログインしました。'
                });

                // 4. URL Clean (アドレスバーから ?welcome=true を削除)
                // ユーザーがリロードした時にまたトーストが出ないように履歴を書き換えます。
                const newUrl = window.location.protocol + "//" + window.location.host + window.location.pathname;
                window.history.replaceState({path: newUrl}, '', newUrl);
            }
			
			// -------------------------------------------------------
	        // 2. マウスホイールによる横スクロール (Horizontal Scroll)
	        // -------------------------------------------------------
	        const scrollContainer = document.getElementById("movieScroll");
	
	        if (scrollContainer) {
	            scrollContainer.addEventListener("wheel", (evt) => {
	                // デフォルトの縦スクロール動作を無効化
	                evt.preventDefault();
	                
					// [修正] scrollBy を使用して滑らかに移動 (Smooth Scroll)
                    // behavior: 'smooth' を指定することで、カクカクせず流れるように動きます。
                    scrollContainer.scrollBy({
                        left: evt.deltaY * 4, // 移動距離 (Multiplier)
                        behavior: 'smooth'    // 滑らかなアニメーション
                    });
	            });
	        }
        });
    </script>

	</div>
</html>